<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Task15</title>
</head>
<body>
	<ul id="source">
	    <li>北京空气质量：<b>90</b></li>
	    <li>上海空气质量：<b>70</b></li>
	    <li>天津空气质量：<b>80</b></li>
	    <li>广州空气质量：<b>50</b></li>
	    <li>深圳空气质量：<b>40</b></li>
	    <li>福州空气质量：<b>32</b></li>
	    <li>成都空气质量：<b>90</b></li>		
	</ul>
	<ul id="resort">
		
	</ul>
	<button id="sort-btn">sort</button>
	
	<script type="text/javascript">
		function getData(){
			var li = document.getElementById('source').getElementsByTagName('li');
			var data = [];
			var content = [];
			for (var i = 0; i < li.length; i++) {
				var city = li[i].innerHTML.slice(0,2);
				var num = parseInt(li[i].getElementsByTagName('b')[0].innerHTML);
				var _content = [city, num];
				data.push(_content);
			}
			return data;
		}

		function  sortAqiData(data) {
			data.sort(function(a,b){
				return b[1] - a[1];
			})
			return data;
		}

		function render(data){
			var resort = document.getElementById('resort');
			var name = ['一','二','三','四','五','六','七'];
			for (var i = 0; i < data.length; i++) {
				var newli = document.createElement('li');
				newli.innerHTML = "第" + name[i] + "名:" + data[i][0] + "空气质量：" + "<b>" + data[i][1] + "</b></br>" ;
			resort.appendChild(newli); 
			}
		}

		function btnHandle(){
			var aqiData = getData();
			aqiData = sortAqiData(aqiData);
			render(aqiData);
		}
		function init(){
			var sortBtn = document.getElementById('sort-btn');
			sortBtn.addEventListener('click',btnHandle,false);

		}

		init();
	</script>
</body>
</html>